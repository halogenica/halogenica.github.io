<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>MIDI Controller - Halogenica</title>
  <meta name="description" content="I&rsquo;ve been interested in making some nice electronic music and sound effects for my games. I tend to find the UI of different VSTs frustrating, so I was interested in getting a MIDI controller that could help speed things up. I&rsquo;m also interested in the possibilities of rigging the MIDI knobs to variables in the code so I could tweak different parameters in real time. Like any good (over-)engineer, I researched what it might take to put one together myself. For whatever reason I find this sort of controller hardware fascinating.">
  <meta name="author" content="Michael Romero"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Halogenica",
    
    "url": "https:\/\/romero.dev"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/romero.dev"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https:\/\/romero.dev",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https:\/\/romero.dev\/hardware\/midi-controller\/",
          "name": "M i d i controller"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "Mike"
  },
  "headline": "MIDI Controller",
  "description" : "I\x26rsquo;ve been interested in making some nice electronic music and sound effects for my games. I tend to find the UI of different VSTs frustrating, so I was interested in getting a MIDI controller that could help speed things up. I\x26rsquo;m also interested in the possibilities of rigging the MIDI knobs to variables in the code so I could tweak different parameters in real time. Like any good (over-)engineer, I researched what it might take to put one together myself. For whatever reason I find this sort of controller hardware fascinating.\n",
  "inLanguage" : "en",
  "wordCount":  1497 ,
  "datePublished" : "2013-01-16T00:00:00",
  "dateModified" : "2013-01-16T00:00:00",
  "image" : "https:\/\/romero.dev",
  "keywords" : [ "Hardware, Music, Microcontroller, Controller" ],
  "mainEntityOfPage" : "https:\/\/romero.dev\/hardware\/midi-controller\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https:\/\/romero.dev",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https:\/\/romero.dev",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="MIDI Controller" />
<meta property="og:description" content="I&rsquo;ve been interested in making some nice electronic music and sound effects for my games. I tend to find the UI of different VSTs frustrating, so I was interested in getting a MIDI controller that could help speed things up. I&rsquo;m also interested in the possibilities of rigging the MIDI knobs to variables in the code so I could tweak different parameters in real time. Like any good (over-)engineer, I researched what it might take to put one together myself. For whatever reason I find this sort of controller hardware fascinating.">
<meta property="og:image" content="https://romero.dev/img/hardware/midi-controller/IMG_2975.jpg" />
<meta property="og:url" content="https://romero.dev/hardware/midi-controller/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Halogenica" />

  <meta name="twitter:title" content="MIDI Controller" />
  <meta name="twitter:description" content="I&rsquo;ve been interested in making some nice electronic music and sound effects for my games. I tend to find the UI of different VSTs frustrating, so I was interested in getting a MIDI controller â€¦">
  <meta name="twitter:image" content="https://romero.dev/img/hardware/midi-controller/IMG_2975.jpg" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@halogenica" />
  <meta name="twitter:creator" content="@halogenica" />
  <link href='https://romero.dev/img/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta name="generator" content="Hugo 0.58.3" />
  <link rel="alternate" href="https://romero.dev/index.xml" type="application/rss+xml" title="Halogenica"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://romero.dev/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://romero.dev/css/highlight.min.css" /><link rel="stylesheet" href="https://romero.dev/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">



<link rel="stylesheet" href="https://romero.dev/css/custom.css" />


  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://romero.dev">Halogenica</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Games" href="https://romero.dev/games/">Games</a>
            </li>
          
        
          
            <li>
              <a title="Graphics" href="https://romero.dev/graphics/">Graphics</a>
            </li>
          
        
          
            <li>
              <a title="Tools" href="https://romero.dev/tools/">Tools</a>
            </li>
          
        
          
            <li>
              <a title="Software" href="https://romero.dev/software/">Software</a>
            </li>
          
        
          
            <li>
              <a title="Hardware" href="https://romero.dev/hardware/">Hardware</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="https://romero.dev/tags">Tags</a>
            </li>
          
        
          
            <li>
              <a title="About" href="https://romero.dev/about">About</a>
            </li>
          
        

        

        
      </ul>
    </div>

    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              
                <h1>MIDI Controller</h1>
              
              
              
              
                <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on January 16, 2013
  
  
  
  
  
</span>


              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <p>I&rsquo;ve been interested in making some nice electronic music and sound effects for my games. I tend to find the UI of different VSTs frustrating, so I was interested in getting a MIDI controller that could help speed things up. I&rsquo;m also interested in the possibilities of rigging the MIDI knobs to variables in the code so I could tweak different parameters in real time. Like any good (over-)engineer, I researched what it might take to put one together myself. For whatever reason I find this sort of controller hardware fascinating.</p>

<p>First I had to find a good micro controller. I have about 5 Arduino&rsquo;s lying around the house, but I also discovered (while working on an arcade cabinet for <a href="http://pigsquad.com">PIGSquad</a> that the Arduino USB controller can&rsquo;t easily be reprogrammed to behave as a game pad or MIDI device; instead it always identifies itself as a serial device. There&rsquo;s software to convert serial to MIDI, but I wanted to go a more user friendly approach. My search led me to an awesome controller called <a href="http://www.pjrc.com/teensy/">Teensy</a>. It&rsquo;s even local to me in Oregon! Teensy can be programmed using both C++ or the Arduino IDE, including most of the Arduino libraries. It supports flashing the USB controller as an HID (human interface device such as a mouse or keyboard), joypad or even MIDI device. It&rsquo;s smaller, cheaper, and has more ports than the Arduino (I got the Teensy++ 2.0). I love this thing!</p>


<link rel="stylesheet" href="https://romero.dev/css/hugo-easy-gallery.css" />
<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/IMG_2731.jpg" alt="/img/hardware/midi-controller/IMG_2731.jpg"/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/IMG_2731.jpg" itemprop="contentUrl"></a>
  </figure>
</div>


<p>I wanted to test out a few interface options so I got my hands on some sliding and rotary potentiometers from <a href="https://www.sparkfun.com/">SparkFun</a>, some Sanwa arcade buttons, and for a bonus unique feature a Nintendo DS XL touchscreen. I hooked them all up in a test circuit to make sure I could wire them to the Teensy as I expected. I was able to use the excellent <a href="http://www.instructables.com/id/A-Framework-For-Making-Affordable-Stylish-Modula/">Instructable</a> from Fuzzy-Wobble to source most of the parts and a nice testing sketch for the Teensy. I strongly recommend this tutorial if you&rsquo;re interested in putting something like this MIDI controller together. Also if you want to make a custom controller but you&rsquo;re not so interested in the circuit design aspect, Fuzzy-Wobble (Alex) has an incredibly cool looking product called the <a href="https://www.instructables.com/id/Teensy-Monster-v10-DIY-MIDI-Controllers/">Teensy Monster</a>. I haven&rsquo;t played with it, but it has some great features and I really appreciate the openness of the system; it definitely seems worth supporting.</p>

<p>The touchscreen (a Nintendo DS &ldquo;digitizer&rdquo; if you&rsquo;re going to search for it) I grabbed off of Amazon for just a few dollars. The breakout board for the ribbon and the Arduino library for reading the touchscreen data and debouncing was provided by the always excellent <a href="http://www.adafruit.com/products/334">Adafruit</a>. After wiring it up on a breadboard and loading some code onto Teensy, I was in business.</p>

<p>

<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/IMG_2983.jpg" alt="/img/hardware/midi-controller/IMG_2983.jpg"/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/IMG_2983.jpg" itemprop="contentUrl"></a>
  </figure>
</div>



<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/touchscreen.png" alt="/img/hardware/midi-controller/touchscreen.png"/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/touchscreen.png" itemprop="contentUrl"></a>
  </figure>
</div>
</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="c1">// Uses touchscreen library from adafruit and largely inspired by fuzzywobble
</span><span class="c1"></span>
<span class="cp">#include</span>
<span class="cpf">#include &#34;TouchScreen.h&#34;</span><span class="cp">
</span><span class="cp"></span>
<span class="c1">//TOUCHSCREEN
</span><span class="c1"></span><span class="cp">#define YP A1  </span><span class="c1">// must be an analog pin, use &#34;An&#34; notation!
</span><span class="c1"></span><span class="cp">#define XM A0  </span><span class="c1">// must be an analog pin, use &#34;An&#34; notation!
</span><span class="c1"></span><span class="cp">#define YM A3  </span><span class="c1">// can be a digital pin
</span><span class="c1"></span><span class="cp">#define XP A2  </span><span class="c1">// can be a digital pin
</span><span class="c1"></span>
<span class="c1">// For better pressure precision, we need to know the resistance
</span><span class="c1">// between X+ and X- Use any multimeter to read it
</span><span class="c1">// For the one we&#39;re using, its 320 ohms across the X plate
</span><span class="c1"></span><span class="n">TouchScreen</span> <span class="n">touchscreen</span> <span class="o">=</span> <span class="n">TouchScreen</span><span class="p">(</span><span class="n">XP</span><span class="p">,</span> <span class="n">YP</span><span class="p">,</span> <span class="n">XM</span><span class="p">,</span> <span class="n">YM</span><span class="p">,</span> <span class="mi">320</span><span class="p">);</span>

<span class="c1">//PUSHBUTTONS
</span><span class="c1">//pin assignment below
</span><span class="c1"></span><span class="kt">int</span> <span class="n">button_pin</span> <span class="o">=</span> <span class="mi">13</span><span class="p">;</span>

<span class="c1">//POTENTIOMETER
</span><span class="c1">//potentiomer variables defined below
</span><span class="c1"></span><span class="kt">int</span> <span class="n">pot_pin</span> <span class="o">=</span> <span class="n">A4</span><span class="p">;</span> <span class="c1">//potentiometer is hooked up to pin analog 4 (f4) on the Teensy++
</span><span class="c1"></span><span class="kt">int</span> <span class="n">pot_value</span> <span class="o">=</span> <span class="p">;</span>
<span class="kt">int</span> <span class="n">pot_value_old</span> <span class="o">=</span> <span class="p">;</span>

<span class="c1">//SLIDER
</span><span class="c1"></span><span class="kt">int</span> <span class="n">slider_pin</span> <span class="o">=</span> <span class="n">A5</span><span class="p">;</span> <span class="c1">//slider is hooked up to pin analog 5 (f5) on the Teensy++
</span><span class="c1"></span><span class="kt">int</span> <span class="n">slider_value</span> <span class="o">=</span> <span class="p">;</span>
<span class="kt">int</span> <span class="n">slider_value_old</span> <span class="o">=</span> <span class="p">;</span>

<span class="c1">//LED
</span><span class="c1">//pin assignment below
</span><span class="c1"></span><span class="kt">int</span> <span class="n">led_pin</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span> <span class="c1">//led is hooked up to digital pin 6 on the Teensy++ 2.0
</span><span class="c1"></span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span>
<span class="p">{</span>  
  <span class="c1">//begin serial communication at 9600bps
</span><span class="c1"></span>  <span class="c1">//this allows the arduino to talk to the computer (serial monitor)
</span><span class="c1"></span>  <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
 
  <span class="c1">//PUSHBUTTONS
</span><span class="c1"></span>  <span class="c1">//declare that pushbutton pins are inputs and turn on pullup resistor
</span><span class="c1"></span>  <span class="n">pinMode</span><span class="p">(</span><span class="n">button_pin</span><span class="p">,</span> <span class="n">INPUT_PULLUP</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span>
<span class="p">{</span> <span class="c1">//this loops over and over and over forever while the Teensy++ is powered
</span><span class="c1"></span> 
   <span class="c1">//PUSHBUTTON
</span><span class="c1"></span>   <span class="k">if</span> <span class="p">(</span><span class="n">digitalRead</span><span class="p">(</span><span class="n">button_pin</span><span class="p">)</span> <span class="o">==</span> <span class="n">LOW</span><span class="p">)</span>
   <span class="p">{</span> <span class="c1">// button was pushed
</span><span class="c1"></span>     <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&#34;Button Pressed&#34;</span><span class="p">);</span>
     <span class="n">digitalWrite</span><span class="p">(</span><span class="n">led_pin</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
     <span class="n">delay</span><span class="p">(</span><span class="mi">250</span><span class="p">);</span>
     <span class="n">analogWrite</span><span class="p">(</span><span class="n">led_pin</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
   <span class="p">}</span>
   
   <span class="c1">//POTENTIOMETER
</span><span class="c1"></span>   <span class="c1">// range 0-1024
</span><span class="c1"></span>   <span class="n">pot_value</span> <span class="o">=</span> <span class="n">analogRead</span><span class="p">(</span><span class="n">pot_pin</span><span class="p">);</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">pot_value_old</span> <span class="o">-</span> <span class="n">pot_value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span>
   <span class="p">{</span> <span class="c1">//check if analog value changed from the last reading with a (high) threshold of 5
</span><span class="c1"></span>     <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&#34;Potentiometer Value: &#34;</span><span class="p">);</span>
     <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">pot_value</span><span class="p">);</span> <span class="c1">//write the value to the serial monitor
</span><span class="c1"></span>     <span class="n">pot_value_old</span> <span class="o">=</span> <span class="n">pot_value</span><span class="p">;</span> <span class="c1">//reset the current value
</span><span class="c1"></span>     <span class="n">delay</span><span class="p">(</span><span class="mi">250</span><span class="p">);</span>
   <span class="p">}</span>
   
   <span class="c1">//SLIDER
</span><span class="c1"></span>   <span class="c1">// range 0-1024
</span><span class="c1"></span>   <span class="n">slider_value</span> <span class="o">=</span> <span class="n">analogRead</span><span class="p">(</span><span class="n">slider_pin</span><span class="p">);</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">slider_value_old</span> <span class="o">-</span> <span class="n">slider_value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span>
   <span class="p">{</span> <span class="c1">//check if analog value changed from the last reading with a (high) threshold of 5
</span><span class="c1"></span>     <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&#34;Slider Value: &#34;</span><span class="p">);</span>
     <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">slider_value</span><span class="p">);</span> <span class="c1">//write the value to the serial monitor
</span><span class="c1"></span>     <span class="n">slider_value_old</span> <span class="o">=</span> <span class="n">slider_value</span><span class="p">;</span> <span class="c1">//reset the current value
</span><span class="c1"></span>     <span class="n">delay</span><span class="p">(</span><span class="mi">250</span><span class="p">);</span>
   <span class="p">}</span>
 
  <span class="c1">//TOUCHSCREEN
</span><span class="c1"></span>  <span class="c1">// x range 100-900
</span><span class="c1"></span>  <span class="c1">// y range 100-900
</span><span class="c1"></span>  <span class="c1">// pressure range 400(low) - 50(high)
</span><span class="c1"></span>  <span class="c1">// a point object holds x y and z coordinates
</span><span class="c1"></span>  <span class="n">Point</span> <span class="n">p</span> <span class="o">=</span> <span class="n">touchscreen</span><span class="p">.</span><span class="n">getPoint</span><span class="p">();</span>
  <span class="c1">// we have some minimum pressure we consider &#39;valid&#39;
</span><span class="c1"></span>  <span class="c1">// pressure of 0 means no pressing!
</span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">z</span> <span class="o">&gt;</span> <span class="n">touchscreen</span><span class="p">.</span><span class="n">pressureThreshhold</span><span class="p">)</span> <span class="p">{</span>
     <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&#34;X = &#34;</span><span class="p">);</span> <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="p">);</span>
     <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&#34;</span><span class="se">\t</span><span class="s">Y = &#34;</span><span class="p">);</span> <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
     <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&#34;</span><span class="se">\t</span><span class="s">Pressure = &#34;</span><span class="p">);</span> <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
     <span class="n">delay</span><span class="p">(</span><span class="mi">250</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>After I got the circuit built and the hardware tested, I was ready to design the physical controller. I knew I wanted a 4x4 grid of buttons so they could be compatible with the sample packs provided for the <a href="http://www.midifighter.com/">MidiFighter</a> from <a href="http://www.djtechtools.com/">DJ TechTools</a>. The folks behind DJ TechTools have also posted a number of handy videos on building your own custom MIDI controller. They also sell the Sanwa arcade buttons and the colorful potentiometer knobs that I&rsquo;m using in this project. If you like the look of this controller but you&rsquo;re not too keen on building one yourself, definitely check out their site!</p>

<p>The hardest part of building the controller so far has definitely been sourcing a nice project box to house everything. I spent several hours looking online for a good metal project box that met my dimensions, but everything was too small or too expensive. I was hoping for a workspace roughly 12 inches wide. Then I took a trip to my local gadget store <a href="http://www.surplusgizmos.com/">Surplus Gizmos</a> and found the perfect case. For $10 I got a roughly 11&rdquo;;x12&rdquo;; stainless steel with black powder coating case, with rubber feet and vents.</p>

<p>With the case sourced, I could start laying out the remaining parts. I have never used any CAD tools for this kind of design, and thought the quickest way to make the layout would in be SketchUp. After a night of measuring, reading tech specs and learning my way around SketchUp, I came up with the following layout:</p>

<p>

<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/MIDI_final.png" alt="/img/hardware/midi-controller/MIDI_final.png"/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/MIDI_final.png" itemprop="contentUrl"></a>
  </figure>
</div>



<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/IMG_3028.jpg" alt="/img/hardware/midi-controller/IMG_3028.jpg"/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/IMG_3028.jpg" itemprop="contentUrl"></a>
  </figure>
</div>
</p>

<p>In order to make a tight fit with the arcade buttons so they didn&rsquo;t twist, I used a scrap piece of plastic drilled in the same pattern as the case to add some thickness for the clips on the buttons. I also used the same plastic for the rotary potentiometers. Because the potentiometers are meant to be mounted in a stationary position (so only the knob twists), they have a 1mm tall peg that can be fastened into the mounting surface. I used the extra plastic to make holes for the pegs, and then mounted that to the case. Unfortunately the rotary potentiometers I got from SparkFun are knurled (meaning they shaft is slotted) to allow the knobs to stay on securely. Unfortunately, the knobs I ordered are for D-shaft potentiometers, which won&rsquo;t fit on the knurled shaft. After a little fudging, I was able to cut off half of the knob with my Dremel and add some plastic scraps to make the shaft a snug fit for the knobs.</p>

<p>

<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/IMG_2955.jpg" alt="/img/hardware/midi-controller/IMG_2955.jpg"/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/IMG_2955.jpg" itemprop="contentUrl"></a>
  </figure>
</div>



<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/IMG_3034.jpg" alt="/img/hardware/midi-controller/IMG_3034.jpg"/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/IMG_3034.jpg" itemprop="contentUrl"></a>
  </figure>
</div>
</p>

<p>I wanted to have a precise layout, and considered sending the case off for laser or water-jet cutting, but decided it would be prohibitively expensive. Instead I purchased a hole saw specifically for the size of the arcade buttons for a few dollars, and the rest I was able to do with a dremel. My biggest concern was cutting the straight lines for the sliders. They turned out alright, and after some filing the sliders are able to move smoothly. A little paint could finish cleaning up the lines, which can be polished up later.</p>



<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/IMG_3042.jpg" alt="/img/hardware/midi-controller/IMG_3042.jpg"/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/IMG_3042.jpg" itemprop="contentUrl"></a>
  </figure>
</div>


<p>With the shell put together I still have a lot of work ahead of me wiring and soldering together the circuit, and finally mapping the controls to the DAW on the computer. The touchscreen needs to be fastened to the surface and I haven&rsquo;t decided how to produce a professional looking molding around the edges. I also have some extra features in store, such as adding LEDs to the buttons so they light up when pressed. There is some more planning that needs to be done as well to make sure the controller doesn&rsquo;t overdraw power from the USB port. But we&rsquo;ll save that for another update!</p>




<div class="gallery caption-position-bottom caption-effect-fade hover-effect-zoom hover-transition" itemscope itemtype="http://schema.org/ImageGallery">
	  
  

<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img" style="background-image: url('https://romero.dev/img/hardware/midi-controller/IMG_2955.jpg');">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/IMG_2955.jpg" alt="These knurled shaft potentiometers don&#39;t fit the D-shaft knobs, but nothing a Dremel, some scrap plastic and glue can&#39;t fix."/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/IMG_2955.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

  

<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img" style="background-image: url('https://romero.dev/img/hardware/midi-controller/IMG_2963.jpg');">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/IMG_2963.jpg" alt="A Nintendo DS XL digitizer (touchscreen). Note that this is just the touch portion, there is no display."/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/IMG_2963.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

  

<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img" style="background-image: url('https://romero.dev/img/hardware/midi-controller/IMG_2965.jpg');">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/IMG_2965.jpg" alt="The Teensy and an analog multiplexer to select which button, knob or slider to read from since the Teensy doesn&#39;t have quite enough ports."/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/IMG_2965.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

  

<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img" style="background-image: url('https://romero.dev/img/hardware/midi-controller/IMG_2983.jpg');">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/IMG_2983.jpg" alt="A test circuit for the sliders, knobs, buttons and touchscreen."/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/IMG_2983.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

  

<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img" style="background-image: url('https://romero.dev/img/hardware/midi-controller/IMG_2981.jpg');">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/IMG_2981.jpg" alt="Got the touchscreen working."/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/IMG_2981.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

  

<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img" style="background-image: url('https://romero.dev/img/hardware/midi-controller/IMG_3025.jpg');">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/IMG_3025.jpg" alt="The pattern was taped down with some painters tape. In retrospect it might have been better to transfer the cutting marks to an entire sheet of the tape so it wouldn&#39;t move during the cutting, but fortunately there weren&#39;t any issues."/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/IMG_3025.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

  

<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img" style="background-image: url('https://romero.dev/img/hardware/midi-controller/IMG_3027.jpg');">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/IMG_3027.jpg" alt="The case does not have 2 of the side pieces, so I cut some out using black textured plastic. It was just luck that the scrap plastic has nearly an identical texture to the case."/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/IMG_3027.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

  

<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img" style="background-image: url('https://romero.dev/img/hardware/midi-controller/IMG_3028.jpg');">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/IMG_3028.jpg" alt="This shows the relative size of the components to the cutting pattern."/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/IMG_3028.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

  

<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img" style="background-image: url('https://romero.dev/img/hardware/midi-controller/IMG_3032.jpg');">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/IMG_3032.jpg" alt="A drill bit I ordered for a few dollars on Amazon that is precisely the size of the arcade buttons."/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/IMG_3032.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

  

<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img" style="background-image: url('https://romero.dev/img/hardware/midi-controller/IMG_3034.jpg');">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/IMG_3034.jpg" alt="This shows how I cut off half of the shaft on the rotary potentiometers to fit the knobs. The black plastic scraps were glued with epoxy to the posts to fill out the D shape, and they fit snugly into the knobs."/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/IMG_3034.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

  

<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img" style="background-image: url('https://romero.dev/img/hardware/midi-controller/IMG_3037.jpg');">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/IMG_3037.jpg" alt="Hand drill with bits specifically for drilling metal. Maybe not necessary since the steel is only 1mm thick, but I thought it would make cleaner holes."/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/IMG_3037.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

  

<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img" style="background-image: url('https://romero.dev/img/hardware/midi-controller/IMG_3041.jpg');">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/IMG_3041.jpg" alt="The holes are generally clean, although I went too fast on some of the ones for the potentiometers which tore a little bit of the metal. Thankfully this is covered up with the knobs on."/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/IMG_3041.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

  

<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img" style="background-image: url('https://romero.dev/img/hardware/midi-controller/IMG_3042.jpg');">
      <img itemprop="thumbnail" src="https://romero.dev/img/hardware/midi-controller/IMG_3042.jpg" alt="The straight lines for the sliders came out a little better than I expected, though not perfect. The edges were cleaned up with some fine hand files and the sliders move nicely."/>
    </div>
    <a href="https://romero.dev/img/hardware/midi-controller/IMG_3042.jpg" itemprop="contentUrl"></a>
  </figure>
</div>


</div>

        
          <div class="blog-tags">
            
              <a href="https://romero.dev/tags/hardware/">Hardware</a>&nbsp;
            
              <a href="https://romero.dev/tags/music/">Music</a>&nbsp;
            
              <a href="https://romero.dev/tags/microcontroller/">Microcontroller</a>&nbsp;
            
              <a href="https://romero.dev/tags/controller/">Controller</a>&nbsp;
            
          </div>
        

        

        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://romero.dev/hardware/mini-server/" data-toggle="tooltip" data-placement="top" title="Mini Server">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="https://romero.dev/hardware/gameboy-backlight/" data-toggle="tooltip" data-placement="top" title="Gameboy Backlight">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      
        
        
      

    </div>
  </div>
</div>

      
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:mike@halogenica.net" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/halogenica" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://twitter.com/halogenica" title="Twitter">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://reddit.com/u/halogenica" title="Reddit">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-reddit-alien fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://linkedin.com/in/halogenica" title="LinkedIn">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://www.youtube.com/user/angelkatalyst" title="Youtube">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-youtube fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://itch.io/profile/halogenica" title="Itch.io">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fas fa-gamepad fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              Michael Romero
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2018
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://romero.dev">Halogenica</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="https://gohugo.io">Hugo v0.58.3</a> powered &nbsp;&bull;&nbsp; Theme <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adapted from <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="https://romero.dev/js/main.js"></script>
<script src="https://romero.dev/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script> renderMathInElement(document.body); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="https://romero.dev/js/load-photoswipe.js"></script>









    
  </body>
</html>

